<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Roboreactor Profile {{userdata}}</title>
  <link rel="icon" type="image/svg" href="../static/images/favicon.ico"><!-- HEAD_svelte-1bqi44g_END --><!-- HEAD_svelte-1q0x54r_START --><!-- HEAD_svelte-1q0x54r_END -->

  <!--Write the parameters input for the current data input -->
  <input type="hidden" id="datauser" value="{{userdata}}"> 
  <input type="hidden" id="encoded_arg" value="{{encodeuser}}"> <!--Get the encodeuser -->
  <input type="hidden" id="plan_arg" value="{{planuser}}"> <!--Get the plan user -->

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css'>
<link rel='stylesheet' href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
<link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css'><link rel="stylesheet" href="/static/dash_style.css">
<link rel="stylesheet" href="../static/style5.css">
<link rel="stylesheet" href="../static/style6.css">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css'>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js'></script>

</head>
<style> 
  .remove {
 background: #f1f1f1;
 td {
   font-style: italic;
 }
}

.table>tbody>tr>td {
 vertical-align: middle;
}
.input-group {
 width: 100%;
}

.editable {
 border: none;
 padding: 0;
 margin: 0;
 text-shadow: none;
 box-shadow: none;
}
.addBtn {
 cursor: pointer;
}
</style>

<style>
  body { margin: 0; }
  canvas { display: block; }
  .label {
   position: absolute;
   width:relative; 
   height:relative;
   background-color: rgba(0, 0, 0, 0.7);
   color: #fff;
   font-family: Arial, sans-serif;
   font-size: 12px;
   padding: 4px 8px;
   border-radius: 4px;
}

</style>
<body>
<!-- partial:index.partial.html -->
<section>
  <header>
    <nav class="rad-navigation">
      <div class="rad-logo-container">
        <a href="#" class="rad-logo">Roboreactor</a>
        <a href="#" class="rad-toggle-btn pull-right"><i class="fa fa-bars"></i></a>
      </div>
      <!--
      <div class="rad-top-nav-container">
        <ul class="links">
          <li>
            <a class="rad-menu-item" href="#"><i class="fa fa-comment-o"></i></a>
          </li>
          <li class="rad-dropdown"><a class="rad-menu-item" href="#"><i class="fa fa-envelope-o"><span class="rad-menu-badge">3</span></i></a>
            <ul class="rad-dropmenu-item">
              <li class="rad-dropmenu-header"><a href="#">Your Notifications</a></li>
              <li class="rad-notification-item">
                <a class="rad-notification-content" href="#">

                </a>
              </li>
              <li class="rad-dropmenu-footer"><a href="#">See all notifications</a></li>
            </ul>
          </li>
          <li class="rad-dropdown"><a class="rad-menu-item" href="#"><i class="fa fa-bell-o"><span class="rad-menu-badge">49</span></i></a>
            <ul class="rad-dropmenu-item">
              <li class="rad-dropmenu-header"><a href="#">Your Alerts</a></li>
              <li class="rad-notification-item">
                <a class="rad-notification-content" href="#">
                </a>
              </li>
              <li class="rad-dropmenu-footer"><a href="#">See all alerts</a></li>
            </ul>
          </li>
        </ul>
      </div>-->
    </nav>
  </header>
</section>
<aside>
  <nav class="rad-sidebar">
    <ul>
      <li>
        <a onclick="dashboardsensor();" class="inbox">
          <i class="fa fa-dashboard"><span class="icon-bg rad-bg-success"></span></i>
          <span class="rad-sidebar-item">Sensor dashboard</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class="fa fa-key">
						<span class="icon-bg rad-bg-danger"></span>
					</i>
          <span class="rad-sidebar-item">API keys</span>
        </a>
        
      </li>
      
      <li><a onclick="Codegendat();" class="done"><i class="fa fa-code"><span class="icon-bg rad-bg-warning"></span></i><span class="rad-sidebar-item">Code Generator</span></a></li>
      <li><a onclick="navigation_system();" class="snooz"><i class="fa fa-compass"><span class="icon-bg rad-bg-primary"></span></i><span class="rad-sidebar-item">Navigation systems</span></a></li>
      <li><a onclick="motion_controller_dash();" class="done"><i class="fa fa-gamepad"><span class="icon-bg rad-bg-warning"></span></i><span class="rad-sidebar-item">Motion controller</span></a></li>
      <li><a onclick="manufacturing_account_dash();" class="done"><i class="fa fa-gear"><span class="icon-bg rad-bg-warning"></span></i><span class="rad-sidebar-item">Manufacturing AAI</span></a></li>
      <li><a onclick="settings_dash();"><i class="fa fa-wrench"><span class="icon-bg rad-bg-violet"></span></i><span class="rad-sidebar-item">Settings</span></a></li>
      <li><a href="/signin" class="done"><i class="fa fa-arrow-left"><span class="icon-bg rad-bg-violet"></span></i><span class="rad-sidebar-item">Logout</span></a></li>
 
    </ul>
  </nav>
</aside>
<main>
  <section>
    <div class="rad-body-wrapper">
      <div class="container-fluid">
        <div class="row">

          <div class="col-lg-4 col-md-6 col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Create API key </h3>
              </div>
              <div class="panel-body">
                   <div id="bubbleplots">
                   
                           
                            
                           
                          
                        
                          <!--Get the project generated from the javascript jwt encode-->
                         
                            <!--
                            <td class="col-xs-3">
                              <input class="form-control addMain" type="text" id="Project" placeholder="Enter project name"  />
                            </td>
                          
                            <td class="col-xs-3">
                              <input class="form-control addPrefer" type="text" name="token" autocomplete="current-password" required="" id="Token" placeholder="token" />
                              
                            </td> -->
                              <p>Project name</p>
                              <input class="form-control addMain" id="Project" placeholder="Enter project name"  >
                              <input class="form-control addPrefer" type="hidden" name="token" autocomplete="current-password" required="" id="Token" placeholder="token" >
                              <p>Secret key</p>
                              <input class="form-control addMain" type="password" id="Secret_key" placeholder="secretkey" disabled>
                              <i class="fa fa-eye" aria-hidden="true" id="togglePassword"></i>
                            <!--<td class="col-xs-7">
                              <input class="form-control addPrefer" type="text" placeholder="expire date" />
                            </td> -->
                            <td class="col-xs-1 text-center">
                              <span class="addBtn">
                                  <i class="fa fa-plus"></i>
                                </span>
                            </td>
                            <td class="col-xs-1 text-center">
                                <span class="trash">
                                  <a href="#" onClick="deleteRow(this)"><i class="fa fa-trash" aria-hidden="true"></i></a>

                                </span>
                            </td>
                        
                        <!--
                          <tr>
                            <td class="col-xs-3"><input type="text" value="Alley" class="form-control editable" />  </td>
                            
                            <td class="col-xs-3"><input type="text" value="Aly" class="form-control editable" />  </td>
                            <td class="col-xs-5"><input type="text" value="Allee, AL, Ally" class="form-control editable" />  </td>
                            <td class="col-xs-1 text-center"><a href="#" onClick="deleteRow(this)"><i class="fa fa-trash-o" aria-hidden="true"></a></td>
                          </tr>
                        
                          <tr>
                            <td class="col-xs-3"><input type="text" value="Avenue" class="form-control editable" />  </td>
                            
                            <td class="col-xs-3"><input type="text" value="Ave" class="form-control editable" />  </td>
                            <td class="col-xs-5"><input type="text" value="Av, Aven, Ally" class="form-control editable" />  </td>
                            <td class="col-xs-1 text-center"><a href="#" onClick="deleteRow(this)"><i class="fa fa-trash-o" aria-hidden="true"></a></td>
                          </tr>
                        -->
                        
                          <!--<button class="btn btn-primary pull-right" id="Download_json" onclick="Download_json(this);">Json download</button> -->
                          <a id="Download_json" onclick="Download_json(this);" class="btn"><i class="icon-download"></i> Export json</a>
                     
                        
                    

              </div>
              </div>
             </div> 
            </div>

            <div class="col-lg-4 col-md-6 col-xs-12">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Single Board Computer request info </h3>
                </div>
                <div class="panel-body">
                     <div id="bubbleplots">
                      <!--Adding the input data of the api key generator-->
                      <p>Project name </p>
                      <input type="text" class="form-control addMain" placeholder="Project name" id="project_name" disable>
                      <p>OS system</p>
                      <input type="text" class="form-control addMain" placeholder="OS system" id="os_system" disable>
                      <p>Architecture</p>
                      <input type="text" class="form-control addMain" placeholder="Architecture" id="os_architecture" disable>
                      <p>OS version</p> 
                      <input type="text" class="form-control addMain" placeholder="OS version" id="os_release" disable> 
                      <p>Processor</p>
                      <input type="text" class="form-control addMain" placeholder="OS processor" id="os_processor" disable> 
                </div>
                </div>
               </div> 
              </div>

          </div>
        </div>
      </div>            
  </section>
</main>
<!-- partial -->
  <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js'></script>
<script  src="/static/script_dash.js"></script>
<body onLoad="add_backup();"></body> 
<script type="text/javascript">
     var user_account = document.getElementById('datauser').value; 
     var user_encode = document.getElementById('encoded_arg').value; 
     console.log(user_encode); 
     $('.addBtn').click(function()  {
            Generae_token_data();
     });
     fetch('/profile_sbc')
            .then(function (response) {
            return response.text();
        }).then(function (text) {
        var response = JSON.parse(text) 
        if(response != {}){  
              //console.log("Single board data",response); //Getting the singleboard computer data 
              //console.log("Single Board computer data",response[email]['Architecture']); 
            try{
              notify_data("success","Successfully retrieving SBC data");
              document.getElementById('os_system').value = String(response[user_account]['OS']);
              document.getElementById('os_architecture').value = String(response[user_account]['Architecture']); 
              document.getElementById('os_release').value= String(response[user_account]['Release']); 
              document.getElementById('os_processor').value= String(response[user_account]['Processor']);
              document.getElementById("project_name").value = String(response[user_account]['Project_name']);
            }
            catch{
                 console.log("No single board computer connector");
                 notify_data("warning","No single board computer connected");
            }
        };        
      });

      function Generae_token_data(){
                console.log("Generate the tooken data ");                
                //Get the generated name at the back end
                project_input = document.getElementById('Project').value; 
                fetch('/tokengenerator', {

                      // Declare what type of data we're sending
                      headers: { 
                                   'Content-Type': 'application/json'
                      },
                      // Specify the method
                      method: 'POST',
                     // A JSON payload
                     body: JSON.stringify({

                    "project_name": String(project_input),"Email":String(user_account) 
                })
                }).then(function (response) { // At this point, Flask has printed our JSON
                return response.text();
               }).then(function (text) {
               console.log('POST response: ');
               // Should be 'OK' if everything was successful
            
               data_review = JSON.parse(text); 
               //Add notification here
               notify_data("success","Generated token successful.Click on 'Export json'")
               document.getElementById('Project').value = project_input;
               document.getElementById('Secret_key').value = data_review[user_account][1];
 
               });
               
     }  
     function deleteRow() {
    // Delete data from database 
    //fetch the data here to remove from database 
    //Sending the email to request delete function in the database 
    fetch('/Delete_token', {

          // Declare what type of data we're sending
         headers: {
         'Content-Type': 'application/json'
       },

      // Specify the method
      method: 'POST',
      // A JSON payload send email to the database to delete the token 
      body: JSON.stringify({
        "Email":String(user_account)
      })
    }).then(function (response) { // At this point, Flask has printed our JSON
    return response.text();
    }).then(function (text) {
    console.log('POST response: ');
         // Should be 'OK' if everything was successful
    console.log(text); 
    document.getElementById('Project').value = ""; 
    document.getElementById('Token').value = ""; 
    document.getElementById('Secret_key').value = ""; 
    notify_data("success","Successfully delete token!");
    
    });
    
  };
     function add_backup(){
    fetch('/token_secret_key')
    .then(function (response) {
        return response.text();
    }).then(function (text) {
        var response = JSON.parse(text) 
      if(response != {}){  
        try{
          account_list  = Object.keys(response) 
          //console.log("Checking account",account_list);  
          notify_data("success","Successfully retrieving data!");             
          var data_token = response[user_account][0].split(".")[2];
          var data_secret = response[user_account][1];
          var data_project_name = response[user_account][2];  
          document.getElementById("Project").value = data_project_name;
          document.getElementById("Token").value = data_token; 
          document.getElementById("Secret_key").value = data_secret;  
          //$(formatRows(data_project_name,data_token,data_secret)).insertAfter('#addRow');
         // $(input).val('');
        }
        catch{
          console.log("pass error");
          notify_data("warning","Fail to retrieving data");
        }
          
       }
    });
  }    
  function add_backup(){
    fetch('/token_secret_key')
    .then(function (response) {
        return response.text();
    }).then(function (text) {
        var response = JSON.parse(text) 
      if(response != {}){  
        try{
          account_list  = Object.keys(response) 
          //console.log("Checking account",account_list);  
                      
          var data_token = response[user_account][0].split(".")[2];
          var data_secret = response[user_account][1];
          var data_project_name = response[user_account][2];  
          document.getElementById("Project").value = data_project_name;
          document.getElementById("Token").value = data_token; 
          document.getElementById("Secret_key").value = data_secret;  
          
        }
        catch{
          console.log("pass error");
        }
          
       }
    });
  }  
  //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
        //Seek hidden 
      const togglePassword = document.querySelector('#togglePassword');
      const password = document.querySelector('#Secret_key');
      togglePassword.addEventListener('click', function (e) {
      // toggle the type attribute
      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);
      // toggle the eye slash icon
      this.classList.toggle('fa-eye-slash');
      
  });


  //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

  function Download_json(el){
    
    fetch('/token_secret_key')
    .then(function (response) {
        return response.text();
    }).then(function (text) {
        var response = JSON.parse(text) 
      if(response != {}){  
   
        var data_token = response[user_account][0].split(".")[2];
        var data_secret = response[user_account][1];
        var data_project_name = response[user_account][2];
        var obj = {
        Account:user_account,
        Token:data_token,
        Secret:data_secret,
        project_name: data_project_name,

     };
    var data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(obj));
    // what to return in order to show download window?

    el.setAttribute("href", "data:"+data);
    el.setAttribute("download","data_token_secret.json");
    
  }   
   });
  }
  //Notification data retrieve 
  function notify_data(status,text){
        toastr.options = {
             "closeButton": true,
             "newestOnTop": false,
             "progressBar": true,
             "positionClass": "toast-top-center",
             "preventDuplicates": false,
             "onclick": null,
             "showDuration": "300",
             "hideDuration": "1000",
             "timeOut": "5000",
             "extendedTimeOut": "1000",
             "showEasing": "swing",
             "hideEasing": "linear",
             "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
           }
           if(status == 'success'){
              toastr.success(text); // if status success 
           }
           if(status == 'warning'){
              toastr.warning(text); 
           }
           if(status == 'error'){
              toastr.error(text); 
           }
            
  }
</script>

       <script >
         
      //Extract the project name from the settings list to get the 
      //Using the current project data fetch input selection from the 
      function Codegendat(){
         window.location.href = "https://roboreactor.com/CodeGenerator/"+user_encode;
      }
      function dashboardsensor(){
        window.location.href = "https://roboreactor.com/dashboard_profile/"+user_encode;
      }  
      function API_key_auth(){
           window.location.href = "https://roboreactor.com/Api_keys/"+user_encode; 
      }
      function urdf_wizard(){
     window.location.href = "https://roboreactor.com/urdf_creator/"+user_encode;      
               
      }
      function navigation_system(){
                
                window.location.href = "https://roboreactor.com/navigation_systems/"+user_encode;
      }
      function motion_controller_dash(){
                      
                 window.location.href = "https://roboreactor.com/motion_controller/"+user_encode;      
      }
      function manufacturing_account_dash(){
         
                 window.location.href = "https://roboreactor.com/Manufacturing_assist/"+user_encode;  
      }

      function settings_dash(){
                
                 window.location.href = "https://roboreactor.com/settings/"+user_encode;
      }
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KGJLJB0CMY">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KGJLJB0CMY');
</script>

</body>

</html>
